(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){},32:function(e,t,a){},36:function(e,t,a){e.exports=a(71)},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(33),l=a.n(o),s=a(6),c=a(14),i=a(17),m=(a(41),a(7)),u=a.n(m),d=a(18),g=function(e){return(new d.a).get(e)},p=function(e){(new d.a).remove(e)},f={CookieKey:"appKey",LocalStorageKey:"userId",AlertMessage:"something bad happened, please contact your administrator",WrongPasswordMessage:"wrong password, try again"},h={login:function(e,t,a){g(f.CookieKey)&&p(f.CookieKey),u.a.post("/login",{email:e,password:t}).then(function(e){return 200==e.status?(function(e,t){var a=new d.a,n={headers:{Authorization:"Basic ".concat(t)}};a.set(e,n)}(f.CookieKey,e.data.token),a(e)):a(null)},function(e){if(e.response.status<=499)return a(e.response);throw console.log(e),new Error(e)})},logout:function(e){u.a.post("/api/user/logout",null,g(f.CookieKey)).then(function(t){return t.status,e(null)},function(t){return 401==t.response.status?(p(f.CookieKey),localStorage.removeItem(f.LocalStorageKey),e(t)):e(null)})}},E=function(e){var t=e.component,a=Object(i.a)(e,["component"]);return r.a.createElement(c.b,Object.assign({},a,{render:function(e){return localStorage.getItem(f.LocalStorageKey)?r.a.createElement(t,Object.assign({},e,a)):r.a.createElement(c.a,{to:{pathname:"/",state:{from:e.location}}})}}))},v=a(8),b=a(9),y=a(11),S=a(10),N=a(12),C=(a(21),a(22),function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(y.a)(this,Object(S.a)(t).call(this))).onChangeHandler=function(t){var a=e.state;a[t.target.name]=t.target.value,e.setState(a)},e.onSubmitHandler=function(t){t.preventDefault();var a=e.state,n=a.name,r=a.email,o=a.password;u.a.post("/create",{name:n,email:r,password:o}).then(function(t){201==t.status?e.props.history.push("/"):alert(f.AlertMessage)},function(e){console.log(e)})},e.state={name:"",email:"",password:"",loggedIn:!1},e}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem(f.LocalStorageKey)&&(localStorage.removeItem(f.LocalStorageKey),this.setState({loggedIn:!0})),g(f.CookieKey)&&(p(f.CookieKey),this.setState({loggedIn:!0}))}},{key:"render",value:function(){return this.state.loggedIn?r.a.createElement(c.a,{to:{pathname:"/"}}):r.a.createElement("div",{className:"text-center",style:{padding:"50px 0"}},r.a.createElement("div",{className:"logo"}," Register "),r.a.createElement("div",{className:"login-form-1"},r.a.createElement("form",{className:"text-left",onSubmit:this.onSubmitHandler},r.a.createElement("div",{className:"login-form-main-message"}),r.a.createElement("div",{className:"main-login-form"},r.a.createElement("div",{className:"login-group"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"name",className:"sr-only"},"className"),r.a.createElement("input",{type:"text",className:"form-control",id:"name",name:"name",placeholder:"name",required:!0,value:this.state.name,onChange:this.onChangeHandler})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"email",className:"sr-only"},"Email"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",placeholder:"email",required:!0,value:this.state.email,onChange:this.onChangeHandler})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password",className:"sr-only"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"password",required:!0,value:this.state.password,onChange:this.onChangeHandler}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary submitbtn"},"Create"),r.a.createElement("div",{className:"etc-login-form"},r.a.createElement("p",null,"already have an account? ",r.a.createElement(s.b,{to:"/"},r.a.createElement("span",null,"login here"))))))))}}]),t}(n.Component)),w=Object(c.f)(C),k=(a(32),function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(y.a)(this,Object(S.a)(t).call(this,e))).logOutHandler=function(e){h.logout(function(e){null!=e?a.props.history.push("/"):alert(f.AlertMessage)})},a.onClickHandler=function(e,t){var n=a.state.images;if(t)return n.map(function(e,t){n[t].clickedState=!1}),u.a.put("/api/user/".concat(a.state.currentUserId,"/topscore/").concat(a.state.score),null,g(f.CookieKey)).then(function(e){200==e.status?a.fetchTopScorers():alert(f.AlertMessage)},function(e){console.log(e)}),a.setState({images:n.sort(function(){return 2*Math.random()/3-.5}),message:"You Guessed Incorrectly! :( ",score:0});n.map(function(t,a){e===t.id&&(n[a].clickedState=!0)});var r=a.state.score+1;return a.setState({images:n.sort(function(){return 2*Math.random()/3-.5}),message:"You Guessed Correctly! Keep going..",score:r})},a.state={images:[],topScorers:[],message:"Click one of the pictures below to start.",score:0,currentUserId:e.location.userId||localStorage.getItem(f.LocalStorageKey),notLoggedIn:!1},a}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem(f.LocalStorageKey)||this.setState({notLoggedIn:!0}),u.a.get("/api/image",g(f.CookieKey)).then(function(t){e.setState({images:t.data})},function(e){console.log(e)}),this.fetchTopScorers()}},{key:"fetchTopScorers",value:function(){var e=this;u.a.get("/api/user/topscorers/".concat(this.props.topScoreCount),g(f.CookieKey)).then(function(t){200==t.status?e.setState({topScorers:t.data}):alert(f.AlertMessage)},function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return this.state.notLoggedIn?(localStorage.removeItem(f.LocalStorageKey),p(f.CookieKey),r.a.createElement(c.a,{to:{pathname:"/"}})):r.a.createElement("div",{className:"jumbotron jumbotron-fluid"},r.a.createElement("span",{className:"scroller-right"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.logOutHandler},"Log out")),r.a.createElement("div",{className:"container text-center"},r.a.createElement("h2",{className:"display-5"},"Clicky Game!"),r.a.createElement("p",{className:"lead"},"Click on any image to earn points, but don't click on any more than once.")),r.a.createElement("div",{className:"container-fluid mainCardContainer"},r.a.createElement("div",{className:"gameMessage text-center"},r.a.createElement("p",null,this.state.message)),r.a.createElement("div",{className:"gameScores text-center"},r.a.createElement("div",null,"Current Score: ",this.state.score),r.a.createElement("div",null,"Top Scorers: ",this.rendertopScorers())),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},this.state.images.map(function(t){return r.a.createElement("div",{key:t.id,className:"allCards col-xs-6 col-sm-6 col-md-4 col-lg-3 col-xl-3",onClick:function(){return e.onClickHandler(t.id,t.clickedState)}},r.a.createElement("img",{id:t.id,src:t.imageUrl,alt:t.id}))})))))}},{key:"rendertopScorers",value:function(){return r.a.createElement("div",null,r.a.createElement("ul",{className:"ul list-inline li"},this.state.topScorers.map(function(e){return r.a.createElement("li",null,e.name," ",r.a.createElement("span",null,": ",e.topScore))})))}}]),t}(n.Component));k.defaultProps={topScoreCount:5};var j=Object(c.f)(k),I=function(e){e.component,Object(i.a)(e,["component"]);return r.a.createElement("div",{className:"jumbotron jumbotron-fluid"},r.a.createElement("div",{className:"container text-center"},r.a.createElement("h2",{className:"display-5"},"Oops! :("),r.a.createElement("p",{className:"lead"},"You're truly lost.")),r.a.createElement("div",{className:"container-fluid mainCardContainer"},r.a.createElement("div",{className:"gameMessage text-center"},r.a.createElement("p",null,r.a.createElement(s.b,{to:"/"},r.a.createElement("span",null,"login here"))))))},O=function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(y.a)(this,Object(S.a)(t).call(this))).onChangeHandler=function(t){var a=e.state;a[t.target.name]=t.target.value,e.setState(a)},e.onSubmitHandler=function(t){t.preventDefault();var a=e.state,n=a.email,r=a.password;h.login(n,r,function(t){null!=t&&200==t.status?(localStorage.setItem(f.LocalStorageKey,t.data.userId),e.setState({userId:t.data.userId})):401==t.status?alert(f.WrongPasswordMessage):alert(f.AlertMessage)})},e.state={email:"",password:"",userId:""},e}return Object(N.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem(f.LocalStorageKey)&&this.setState({userId:localStorage.getItem(f.LocalStorageKey)})}},{key:"render",value:function(){var e=this.state.userId;return e?r.a.createElement(c.a,{to:{pathname:"/game",userId:e}}):r.a.createElement("div",{className:"text-center",style:{padding:"50px 0"}},r.a.createElement("div",{className:"logo"}," Login "),r.a.createElement("div",{className:"login-form-1"},r.a.createElement("form",{className:"text-left",onSubmit:this.onSubmitHandler},r.a.createElement("div",{className:"login-form-main-message"}),r.a.createElement("div",{className:"main-login-form"},r.a.createElement("div",{className:"login-group"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"email",className:"sr-only"},"Email"),r.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",placeholder:"email",required:!0,value:this.state.email,onChange:this.onChangeHandler})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password",className:"sr-only"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"password",required:!0,value:this.state.password,onChange:this.onChangeHandler}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary submitbtn"},"Submit"),r.a.createElement("div",{className:"etc-login-form"},r.a.createElement("p",null,"new user? ",r.a.createElement(s.b,{to:"/create"},r.a.createElement("span",null,"register here"))))))))}}]),t}(n.Component),K=Object(c.f)(O),x=(a(70),function(e){function t(){return Object(v.a)(this,t),Object(y.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{class:"container"},r.a.createElement(K,null))}}]),t}(n.Component));l.a.render(r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:x}),r.a.createElement(c.b,{path:"/create",component:w}),r.a.createElement(E,{path:"/game",component:j}),r.a.createElement(c.b,{component:I})))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.f67f05b8.chunk.js.map